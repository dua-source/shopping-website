# 阿里云ECS服务器部署Java Web项目指南

## 服务器环境准备

### 1. 登录阿里云ECS服务器
- 使用远程桌面连接Windows服务器
- 输入服务器IP、用户名和密码登录

### 2. 安装Java JDK
- 下载Java JDK安装包（推荐Java 11或以上版本）
- 双击安装，注意记住安装路径
- 配置环境变量：
  - 新建系统变量 `JAVA_HOME`，值为JDK安装路径
  - 在系统变量 `Path` 中添加 `%JAVA_HOME%\bin`

### 3. 安装Tomcat服务器
- 下载Tomcat 11或兼容版本的Windows安装包
- 解压到合适目录（如 `C:\Tomcat`）
- 配置环境变量（可选但推荐）：
  - 新建系统变量 `CATALINA_HOME`，值为Tomcat安装路径
  - 在系统变量 `Path` 中添加 `%CATALINA_HOME%\bin`

### 4. 安装MySQL数据库（如果项目需要）
- 下载MySQL Windows安装包
- 按照向导安装，设置root密码
- 启动MySQL服务

## 项目部署

### 1. 上传项目WAR文件
- 将本地生成的 `shopping.war` 文件上传到服务器
- 推荐上传到Tomcat的 `webapps` 目录（如 `C:\Tomcat\webapps`）

### 2. 配置数据库连接
- 如果项目使用MySQL，需要：
  - 在MySQL中创建数据库（如 `shoppingdb`）
  - 导入数据库脚本（如果有）
  - 修改项目中的数据库连接配置：
    - 打开 `WEB-INF\classes\db.properties`
    - 修改数据库URL、用户名和密码为服务器上的MySQL配置

### 3. 启动Tomcat服务
- 方法1：双击Tomcat目录下的 `bin\startup.bat`
- 方法2：使用命令行运行 `startup.bat`
- 查看 `logs\catalina.out` 或 `logs\localhost.xxx.log` 检查启动日志

## 访问配置

### 1. 配置阿里云安全组
- 登录阿里云ECS控制台
- 找到对应实例，进入安全组配置
- 添加入站规则，开放8080端口（Tomcat默认端口）
- 允许所有IP访问或指定允许访问的IP范围

### 2. 配置Tomcat端口（可选）
- 如果需要使用80端口（默认HTTP端口），可以修改Tomcat配置：
  - 打开 `conf\server.xml`
  - 找到 `Connector` 标签，将 `port="8080"` 修改为 `port="80"`
  - 重启Tomcat

### 3. 测试远程访问
- 在浏览器中输入 `http://服务器IP:8080/shopping`
- 如果使用80端口，直接输入 `http://服务器IP/shopping`
- 检查项目是否正常运行

## 注意事项

1. **防火墙配置**：确保Windows服务器防火墙允许Tomcat端口（8080或80）的入站连接
2. **权限问题**：确保Tomcat服务有足够权限访问项目文件
3. **日志监控**：定期检查Tomcat日志，及时发现和解决问题
4. **自动启动**：可以将Tomcat配置为Windows服务，实现开机自启动
5. **备份策略**：定期备份项目文件和数据库，确保数据安全

## 常见问题排查

- **访问超时**：检查阿里云安全组和Windows防火墙是否开放端口
- **404错误**：检查WAR文件是否正确部署，访问路径是否正确
- **500错误**：查看Tomcat日志，检查是否有代码错误或配置错误
- **数据库连接失败**：检查数据库配置是否正确，MySQL服务是否启动

通过以上步骤，您就可以将本地Java Web项目成功部署到阿里云ECS服务器上，并实现远程访问。