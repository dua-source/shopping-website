# 重新编译和打包项目计划

## 项目分析
- 项目类型：Java Web应用（JSP + Servlet）
- 源代码目录：`src/`
- Web资源目录：`WebContent/`
- 编译输出目录：`WebContent/WEB-INF/classes/`
- 依赖库目录：`WebContent/WEB-INF/lib/`
- 已有打包脚本：`package-war.ps1`（跳过编译步骤）

## 执行步骤

### 1. 清理现有class文件
- 删除 `WebContent/WEB-INF/classes/` 目录下的所有class文件，确保编译环境干净

### 2. 编译所有Java源文件
- 使用javac命令编译所有Java文件
- 编译路径：从 `src/` 编译到 `WebContent/WEB-INF/classes/`
- 依赖库：包含 `WebContent/WEB-INF/lib/` 下的所有JAR文件

### 3. 复制资源文件
- 确保 `src/db.properties` 等资源文件被复制到 `WebContent/WEB-INF/classes/` 目录

### 4. 打包成WAR文件
- 使用jar命令将 `WebContent/` 目录打包成WAR文件
- 输出文件：`shopping.war`

## 命令执行顺序
1. **清理class文件**：
   ```powershell
   Remove-Item -Path "WebContent\WEB-INF\classes\com\shopping\*" -Recurse -Force
   Remove-Item -Path "WebContent\WEB-INF\classes\db.properties" -Force 2>$null
   Remove-Item -Path "WebContent\WEB-INF\classes\mail.properties" -Force 2>$null
   ```

2. **编译Java文件**：
   ```powershell
   javac -cp "WebContent\WEB-INF\lib\*" -d "WebContent\WEB-INF\classes" "src\com\shopping\model\*.java" "src\com\shopping\dao\*.java" "src\com\shopping\dao\impl\*.java" "src\com\shopping\service\*.java" "src\com\shopping\service\impl\*.java" "src\com\shopping\util\*.java" "src\com\shopping\controller\*.java"
   ```

3. **复制资源文件**：
   ```powershell
   Copy-Item -Path "src\db.properties" -Destination "WebContent\WEB-INF\classes\db.properties" -Force
   Copy-Item -Path "src\com\shopping\util\mail.properties" -Destination "WebContent\WEB-INF\classes\mail.properties" -Force
   ```

4. **打包成WAR文件**：
   ```powershell
   Set-Location -Path "WebContent"
   jar -cvf "../shopping.war" .
   Set-Location -Path ".."
   ```

## 验证步骤
- 检查 `WebContent\WEB-INF\classes\` 目录是否生成了新的class文件
- 检查 `shopping.war` 文件是否成功生成
- 查看WAR文件内容，确保包含所有必要的文件

## 预期结果
- 生成最新的 `shopping.war` 文件
- 所有Java文件被重新编译
- 资源文件被正确复制
- WAR文件可直接部署到Java Web服务器