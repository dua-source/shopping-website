# MySQL中文显示乱码问题解决方案

## 问题分析
从截图中可以看到，MySQL查询结果中的中文显示为乱码，这是由于字符集设置不正确导致的。主要原因是：
1. MySQL服务器默认字符集可能不是utf8mb4
2. 客户端连接时使用的字符集不正确
3. 数据库或表的字符集设置与实际存储的字符不匹配

## 解决方案

### 1. 修改MySQL配置文件

1. 找到MySQL的配置文件my.ini（通常位于`C:\ProgramData\MySQL\MySQL Server 8.0`目录）
2. 用文本编辑器打开my.ini
3. 添加或修改以下配置：

```ini
[client]
default-character-set = utf8mb4

[mysql]
default-character-set = utf8mb4

[mysqld]
character-set-client-handshake = FALSE
character-set-server = utf8mb4
collation-server = utf8mb4_unicode_ci
init_connect = 'SET NAMES utf8mb4'
```

### 2. 重启MySQL服务

```bash
# 停止服务
net stop MySQL80

# 启动服务
net start MySQL80
```

### 3. 重新创建数据库和表

1. 打开MySQL Command Line Client
2. 执行以下命令：

```sql
-- 删除旧数据库
DROP DATABASE IF EXISTS shoppingdb;

-- 创建新数据库，指定正确的字符集
CREATE DATABASE IF NOT EXISTS shoppingdb DEFAULT CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;

-- 使用新数据库
USE shoppingdb;

-- 设置会话字符集
SET NAMES utf8mb4;
SET CHARACTER_SET_CLIENT = utf8mb4;
SET CHARACTER_SET_RESULTS = utf8mb4;

-- 重新执行购物网站的数据库脚本
SOURCE D:/Trae CN/网络应用开发大作业/shoppingdb.sql;
```

### 4. 验证修复结果

```sql
-- 查看所有表
SHOW TABLES;

-- 查看用户表数据
SELECT * FROM users;

-- 查看产品表数据
SELECT * FROM products;

-- 检查字符集设置
SHOW VARIABLES LIKE 'character_set_%';
SHOW VARIABLES LIKE 'collation_%';
```

## 关键修复点

1. **修改MySQL全局配置**：确保服务器、客户端和连接都使用utf8mb4字符集
2. **重启服务**：使配置生效
3. **重新创建数据库和表**：确保所有层级都使用正确的字符集
4. **设置会话字符集**：确保每次连接都使用正确的字符集

## 预期效果

- 中文数据在查询结果中显示正常
- 没有乱码现象
- 所有字符集设置都为utf8mb4

## 注意事项

1. 确保MySQL配置文件路径正确
2. 修改配置文件后必须重启服务才能生效
3. 重新创建数据库会删除所有现有数据，确保已备份重要数据
4. 确保脚本中的字符集设置正确

通过以上步骤，您应该能够成功解决MySQL中文显示乱码问题。