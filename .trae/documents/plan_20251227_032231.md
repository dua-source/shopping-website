# 阿里云ECS服务器部署购物网站指南

## 1. 服务器初始化配置

### 1.1 登录ECS服务器
- 使用阿里云控制台的VNC功能或远程桌面连接登录服务器
- 首次登录修改管理员密码

### 1.2 配置网络
- 确保服务器可以访问互联网
- 配置安全组规则，开放必要端口：
  - 80（HTTP）
  - 443（HTTPS，可选）
  - 3306（MySQL，仅允许特定IP访问）
  - 8080（Tomcat，部署时使用）

### 1.3 关闭防火墙或配置规则
- 确保Windows防火墙允许上述端口的访问

## 2. 安装必要软件

### 2.1 安装JDK
- 下载JDK 11或17版本（与Tomcat兼容）
- 安装JDK，设置环境变量：
  - JAVA_HOME：JDK安装路径
  - PATH：添加%JAVA_HOME%\bin

### 2.2 安装Tomcat
- 下载Tomcat 9或10版本
- 解压到指定目录（如C:\Tomcat9）
- 配置环境变量：
  - CATALINA_HOME：Tomcat安装路径
  - PATH：添加%CATALINA_HOME%\bin

### 2.3 安装MySQL（可选，如使用本地数据库）
- 下载MySQL 8.0版本
- 安装MySQL，设置root密码
- 配置MySQL服务自动启动

## 3. 配置Tomcat

### 3.1 修改server.xml
- 编辑C:\Tomcat9\conf\server.xml
- 修改端口（可选，将8080改为80）
- 配置主机名和应用上下文

### 3.2 配置Tomcat用户
- 编辑C:\Tomcat9\conf\tomcat-users.xml
- 添加管理用户，用于访问Tomcat管理界面

### 3.3 启动Tomcat服务
- 运行C:\Tomcat9\bin\startup.bat
- 或安装为Windows服务：service.bat install

## 4. 部署项目

### 4.1 打包项目
- 在本地开发环境中，将项目打包为WAR文件
- 或直接复制项目文件夹到Tomcat的webapps目录

### 4.2 上传项目到服务器
- 使用FTP工具（如WinSCP）将WAR文件上传到服务器的Tomcat\webapps目录
- 或使用远程桌面直接复制文件

### 4.3 配置数据库连接
- 修改项目中的db.properties文件，更新数据库连接信息
- 确保指向正确的MySQL服务器（本地或远程）

### 4.4 重启Tomcat
- 停止Tomcat：shutdown.bat
- 启动Tomcat：startup.bat

## 5. 配置安全组和防火墙

### 5.1 阿里云安全组配置
- 登录阿里云控制台
- 进入ECS实例的安全组配置
- 添加入站规则，开放必要端口

### 5.2 Windows防火墙配置
- 打开Windows Defender防火墙
- 添加入站规则，允许HTTP（80）、HTTPS（443）和Tomcat（8080）端口

## 6. 测试访问

### 6.1 本地测试
- 在服务器上访问：http://localhost:8080/项目名称
- 检查网站是否正常运行

### 6.2 外部测试
- 在本地计算机上访问：http://服务器公网IP:8080/项目名称
- 测试所有功能模块

## 7. 配置自动启动

### 7.1 设置Tomcat为自动启动服务
- 运行C:\Tomcat9\bin\service.bat install
- 在Windows服务管理器中设置Tomcat服务为自动启动

### 7.2 设置MySQL为自动启动
- 在Windows服务管理器中设置MySQL服务为自动启动

## 8. 监控和维护

### 8.1 配置日志
- 查看Tomcat日志：C:\Tomcat9\logs\catalina.out
- 查看项目日志

### 8.2 定期备份
- 定期备份数据库
- 定期备份项目文件

## 注意事项

1. 确保使用最新版本的软件，避免安全漏洞
2. 定期更新服务器系统补丁
3. 配置强密码，避免使用默认密码
4. 限制MySQL的远程访问，仅允许特定IP
5. 考虑配置HTTPS，提高网站安全性
6. 监控服务器资源使用情况，及时调整配置

通过以上步骤，您应该能够成功在阿里云ECS服务器上部署购物网站。