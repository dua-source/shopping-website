# 重新编译和打包项目计划执行方案

## 执行步骤

1. **编译Java源代码**
   - 使用PowerShell获取所有Java文件的列表
   - 使用javac命令编译所有Java文件
   - 设置classpath包含所有依赖库（WebContent/WEB-INF/lib/*）
   - 设置输出目录为WebContent/WEB-INF/classes

2. **复制配置文件**
   - 使用Copy-Item命令将db.properties文件从src目录复制到WebContent/WEB-INF/classes目录
   - 使用Copy-Item命令将mail.properties文件从src/com/shopping/util目录复制到WebContent/WEB-INF/classes目录

3. **重新打包WAR文件**
   - 使用jar命令将WebContent目录打包为war文件
   - 输出文件名为shopping.war
   - 替换原有的war文件

4. **验证结果**
   - 检查编译过程是否有错误
   - 确认类文件是否正确生成
   - 确认war文件是否成功创建

## 详细命令

```powershell
# 1. 编译Java源代码
$javaFiles = Get-ChildItem -Path src -Recurse -Filter *.java | Select-Object -ExpandProperty FullName
javac -cp "WebContent/WEB-INF/lib/*" -d "WebContent/WEB-INF/classes" $javaFiles

# 2. 复制配置文件
Copy-Item -Path "src/db.properties" -Destination "WebContent/WEB-INF/classes/db.properties"
Copy-Item -Path "src/com/shopping/util/mail.properties" -Destination "WebContent/WEB-INF/classes/mail.properties"

# 3. 重新打包WAR文件
cd WebContent
jar -cvf "../shopping.war" .
cd ..

# 4. 验证结果
get-item shopping.war
jar -tf shopping.war | select-object -first 20
```

## 注意事项

1. 确保PowerShell环境下可以使用javac和jar命令
2. 如果编译过程中出现BOM字符错误，需要先运行RemoveBOM工具
3. 确保所有依赖库都存在于WebContent/WEB-INF/lib目录中
4. 验证war文件是否包含所有必要的组件