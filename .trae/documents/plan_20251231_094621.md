# 修复云服务器上的跳转错误

## 问题分析

经过检查，发现以下问题导致跳转错误：

1. **UpdateProfileServlet.java** 文件中存在直接访问JSP文件的重定向：
   - 第26行：`response.sendRedirect(request.getContextPath() + "/jsp/login.jsp");`
   - 第45行：`response.sendRedirect(request.getContextPath() + "/jsp/login.jsp");`
   - 应该使用Servlet映射 `/login` 而不是直接访问JSP文件

2. **JSP文件可能不在直接访问路径下**：
   - 在云服务器部署时，JSP文件可能被放在WEB-INF目录下或其他无法直接访问的位置
   - 应该通过Servlet映射访问页面，而不是直接访问JSP文件

## 修复步骤

1. **修复UpdateProfileServlet.java中的重定向链接**
   - 将 `/jsp/login.jsp` 修改为 `/login`
   - 确保所有重定向都使用Servlet映射，而不是直接访问JSP文件

2. **检查并修复其他可能存在类似问题的Servlet**
   - 检查所有Servlet中的重定向链接
   - 确保它们都使用Servlet映射，而不是直接访问JSP文件

3. **重新编译和打包项目**
   - 确保所有修改都被正确编译
   - 重新打包WAR文件，包含所有修复

## 详细修改

1. **修改UpdateProfileServlet.java**
   - 第26行：`response.sendRedirect(request.getContextPath() + "/login");`
   - 第45行：`response.sendRedirect(request.getContextPath() + "/login");`

2. **重新编译并打包项目**
   ```powershell
   $javaFiles = Get-ChildItem -Path src -Recurse -Filter *.java | Select-Object -ExpandProperty FullName
   javac -cp "WebContent/WEB-INF/lib/*" -d "WebContent/WEB-INF/classes" $javaFiles
   cd WebContent
   jar -cvf "../shopping.war" .
   cd ..
   ```

## 预期结果

修复后，所有跳转链接都将使用正确的Servlet映射，而不是直接访问JSP文件，这样在云服务器上部署时就不会出现404错误。

访问URL格式：
- 注册页面：http://8.148.155.248:8080/shopping/register
- 登录页面：http://8.148.155.248:8080/shopping/login
- 订单详情页面：http://8.148.155.248:8080/shopping/orderDetail?orderId=1
- 编辑商品页面：http://8.148.155.248:8080/shopping/admin/editProduct?id=1