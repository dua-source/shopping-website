## 图片文件名修改计划

### 问题分析
当前图片上传逻辑使用UUID生成文件名，用户要求修改为使用商品名称作为文件名，这样可以使文件名更有意义，便于管理和识别。

### 实现方案
1. **修改文件名生成逻辑**：
   - 将UUID生成文件名改为使用商品名称
   - 保持原文件的扩展名
   - 添加特殊字符处理，确保文件名安全
   - 确保文件名唯一，避免覆盖

2. **修改文件列表**：
   - `src/com/shopping/controller/AddProductServlet.java` - 修改添加商品时的图片文件名生成
   - `src/com/shopping/controller/EditProductServlet.java` - 修改编辑商品时的图片文件名生成

3. **特殊字符处理**：
   - 替换文件名中的特殊字符（如空格、斜杠、引号等）
   - 使用下划线或连字符替换
   - 确保生成的文件名符合Windows文件命名规则

4. **唯一性处理**：
   - 检查文件是否已存在
   - 如果存在，添加数字后缀
   - 确保每个商品的图片文件名唯一

### 预期效果
- 上传的图片文件名将等于商品名称
- 文件名安全，无特殊字符
- 文件名唯一，不会覆盖
- 便于管理和识别图片

### 代码修改要点
1. **AddProductServlet.java**：
   - 修改第98行的fileName生成逻辑
   - 使用商品名称替换UUID
   - 添加特殊字符处理
   - 确保文件名唯一

2. **EditProductServlet.java**：
   - 修改第150行的fileName生成逻辑
   - 使用商品名称替换UUID
   - 修改删除旧文件的逻辑，确保能正确删除
   - 添加特殊字符处理

3. **添加辅助方法**：
   - `sanitizeFileName()` - 处理文件名中的特殊字符
   - `getUniqueFileName()` - 确保文件名唯一

### 测试计划
1. 添加新商品，上传图片，检查文件名是否等于商品名称
2. 编辑商品，修改图片，检查文件名是否更新
3. 验证文件名安全，无特殊字符
4. 验证文件名唯一，不会覆盖
5. 验证图片能正确显示

### 文件修改列表
1. `src/com/shopping/controller/AddProductServlet.java` - 修改图片文件名生成逻辑
2. `src/com/shopping/controller/EditProductServlet.java` - 修改图片文件名生成逻辑

### 实施步骤
1. 编写sanitizeFileName辅助方法
2. 编写getUniqueFileName辅助方法
3. 修改AddProductServlet.java
4. 修改EditProductServlet.java
5. 测试修改效果