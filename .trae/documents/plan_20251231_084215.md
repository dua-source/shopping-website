# 重新编译和打包项目计划

## 目标

在命令行环境下重新编译和打包项目，生成可部署的WAR文件。

## 计划步骤

1. **清理现有class文件**
   - 删除`WebContent/WEB-INF/classes`目录下的所有现有class文件
   - 确保编译环境干净，避免旧文件影响

2. **编译Java源代码**
   - 使用`javac`命令编译所有Java源代码
   - 设置正确的类路径，包括所有依赖JAR文件
   - 指定输出目录为`WebContent/WEB-INF/classes`

3. **复制配置文件和资源**
   - 将`src`目录下的配置文件（如`db.properties`、`mail.properties`）复制到`WebContent/WEB-INF/classes`目录
   - 确保所有必要的资源文件都能被正确打包

4. **打包成WAR文件**
   - 使用`jar`命令将`WebContent`目录打包成WAR文件
   - 确保WAR文件结构符合Java EE标准

## 详细命令

1. **清理现有class文件**
   ```powershell
   Remove-Item -Path WebContent/WEB-INF/classes -Recurse -Force
   ```

2. **编译Java源代码**
   ```powershell
   javac -d WebContent/WEB-INF/classes -cp "WebContent/WEB-INF/lib/*" src/com/shopping/**/*.java
   ```

3. **复制配置文件和资源**
   ```powershell
   Copy-Item -Path src/db.properties -Destination WebContent/WEB-INF/classes
   Copy-Item -Path src/mail.properties -Destination WebContent/WEB-INF/classes
   Copy-Item -Path src/com/shopping/util/db.properties -Destination WebContent/WEB-INF/classes/com/shopping/util
   Copy-Item -Path src/com/shopping/util/mail.properties -Destination WebContent/WEB-INF/classes/com/shopping/util
   ```

4. **打包成WAR文件**
   ```powershell
   cd WebContent
   jar -cvf ..\shopping.war .
   cd ..
   ```

## 验证步骤

1. 检查编译输出，确保没有编译错误
2. 检查`WebContent/WEB-INF/classes`目录，确保所有class文件都已生成
3. 检查WAR文件是否已生成，查看其大小和内容
4. 使用`jar -tf shopping.war`命令查看WAR文件的内部结构，确保符合要求

## 预期结果

成功生成可部署的WAR文件，包含所有必要的class文件、配置文件和Web资源，可以直接部署到Tomcat等Java EE服务器上。